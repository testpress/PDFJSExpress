/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{372:function(Da,xa,z){z.r(xa);var na=z(2),ia=z(0);z.n(ia);var ka=z(1),ea=z(124);Da=z(46);var ca=z(78),x=z(205),r=z(56),n=z(204);z=z(319);var a=window,e=function(){function y(b,w,aa){var fa=-1===b.indexOf("?")?"?":"&";switch(w){case r.a.NEVER_CACHE:this.url=b+fa+"_="+Object(ia.uniqueId)();break;default:this.url=b}this.Le=aa;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);this.request.setRequestHeader("X-Requested-With",
"XMLHttpRequest");this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=n.a.NOT_STARTED}y.prototype.start=function(b,w){var aa=this,fa=this,ja=this.request,ba;fa.Vu=0;b&&Object.keys(b).forEach(function(ha){aa.request.setRequestHeader(ha,b[ha])});w&&(this.request.withCredentials=w);this.bB=setInterval(function(){var ha=0===window.document.URL.indexOf("file:///");ha=200===ja.status||
ha&&0===ja.status;if(ja.readyState!==n.b.DONE||ha){try{ja.responseText}catch(da){return}fa.Vu<ja.responseText.length&&(ba=fa.N9())&&fa.trigger(y.Events.DATA,[ba]);0===ja.readyState&&(clearInterval(fa.bB),fa.trigger(y.Events.DONE))}else clearInterval(fa.bB),fa.trigger(y.Events.DONE,["Error received return status "+ja.status])},1E3);this.request.send(null);this.status=n.a.STARTED};y.prototype.N9=function(){var b=this.request,w=b.responseText;if(0!==w.length)if(this.Vu===w.length)clearInterval(this.bB),
this.trigger(y.Events.DONE);else return w=Math.min(this.Vu+3E6,w.length),b=a.kP(b,this.Vu,!0,w),this.Vu=w,b};y.prototype.abort=function(){clearInterval(this.bB);var b=this;this.request.onreadystatechange=function(){Object(ka.i)("StreamingRequest aborted");b.status=n.a.ABORTED;return b.trigger(y.Events.ABORTED)};this.request.abort()};y.prototype.finish=function(){var b=this;this.request.onreadystatechange=function(){b.status=n.a.SUCCESS;return b.trigger(y.Events.DONE)};this.request.abort()};y.Events=
{DONE:"done",DATA:"data",ABORTED:"aborted"};return y}();Object(Da.a)(e);var f;(function(y){y[y.LOCAL_HEADER=0]="LOCAL_HEADER";y[y.FILE=1]="FILE";y[y.CENTRAL_DIR=2]="CENTRAL_DIR"})(f||(f={}));var h=function(y){function b(){var w=y.call(this)||this;w.buffer="";w.state=f.LOCAL_HEADER;w.TI=4;w.Rk=null;w.wr=ea.c;w.dm={};return w}Object(na.c)(b,y);b.prototype.H9=function(w){var aa;for(w=this.buffer+w;w.length>=this.wr;)switch(this.state){case f.LOCAL_HEADER:this.Rk=aa=this.R9(w.slice(0,this.wr));if(aa.$r!==
ea.g)throw Error("Wrong signature in local header: "+aa.$r);w=w.slice(this.wr);this.state=f.FILE;this.wr=aa.aE+aa.Vo+aa.bu+this.TI;this.trigger(b.Events.HEADER,[aa]);break;case f.FILE:this.Rk.name=w.slice(0,this.Rk.Vo);this.dm[this.Rk.name]=this.Rk;aa=this.wr-this.TI;var fa=w.slice(this.Rk.Vo+this.Rk.bu,aa);this.trigger(b.Events.FILE,[this.Rk.name,fa,this.Rk.rE]);w=w.slice(aa);if(w.slice(0,this.TI)===ea.h)this.state=f.LOCAL_HEADER,this.wr=ea.c;else return this.state=f.CENTRAL_DIR,!0}this.buffer=w;
return!1};b.Events={HEADER:"header",FILE:"file"};return b}(x.a);Object(Da.a)(h);Da=function(y){function b(w,aa,fa,ja,ba){fa=y.call(this,w,fa,ja)||this;fa.url=w;fa.stream=new e(w,aa);fa.Gd=new h;fa.RR=window.createPromiseCapability();fa.nS={};fa.Le=ba;return fa}Object(na.c)(b,y);b.prototype.Jv=function(w){var aa=this;this.request([this.zi,this.Lj,this.xi]);this.stream.addEventListener(e.Events.DATA,function(fa){try{if(aa.Gd.H9(fa))return aa.stream.finish()}catch(ja){throw aa.stream.abort(),aa.Zt(ja),
w(ja),ja;}});this.stream.addEventListener(e.Events.DONE,function(fa){aa.p9=!0;aa.RR.resolve();fa&&(aa.Zt(fa),w(fa))});this.Gd.addEventListener(h.Events.HEADER,Object(ia.bind)(this.mS,this));this.Gd.addEventListener(h.Events.FILE,Object(ia.bind)(this.h$,this));return this.stream.start(this.Le,this.withCredentials)};b.prototype.hP=function(w){var aa=this;this.RR.promise.then(function(){w(Object.keys(aa.Gd.dm))})};b.prototype.Lm=function(){return!0};b.prototype.request=function(w){var aa=this;this.p9&&
w.forEach(function(fa){aa.nS[fa]||aa.nda(fa)})};b.prototype.mS=function(){};b.prototype.abort=function(){this.stream&&this.stream.abort()};b.prototype.nda=function(w){this.trigger(ca.a.Events.PART_READY,[{ab:w,error:"Requested part not found",Hh:!1,Ff:!1}])};b.prototype.h$=function(w,aa,fa){this.nS[w]=!0;this.trigger(ca.a.Events.PART_READY,[{ab:w,data:aa,Hh:!1,Ff:!1,error:null,Sc:fa}])};return b}(ca.a);Object(z.a)(Da);Object(z.b)(Da);xa["default"]=Da}}]);}).call(this || window)
